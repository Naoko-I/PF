<%= render 'users/header' %>
<div class="container">
  <div class="row">
    <!-- 新着blog表示 -->
    <div class="col-md-offset-2 col-md-5">
      <article class="new-arriving-blog">
        <% @blogs.each do |blog| %>
        <!-- <section class="blog-item clearfix"> -->
          <header>
            <h2>blog.userのimageと名前が入る</h2>
            <%= link_to(blog.user) do %>
                <%= attachment_image_tag blog.user, :profile_image, size:'60x60', format: 'jpeg', fallback: 'no_image.jpg', class: "img-circle pull-left profile-thumb" %>
                <%= blog.user.name %>
            <% end %>
            <!--追加実装。blogカラムにdatetime追加しないと表示できない --><%#= blog.datetime %>
            <p><time datetime="2020/4/1">2020/4/1</time></p>
          </header>
          <div class="blog-image">
            <%= attachment_image_tag blog, :image, size:'100x100', format: 'jpeg', fallback: 'no_image.jpg', size:'100x100' %>
            <%= blog.body %>
          </div>
          <footer>
            <!-- 非同期　色変更-->
            <ul class="blog-icon">
              <li>
                <i class="glyphicon glyphicon-heart-empty"></i>
                <%= blog.favorites.count %>
              </li>
              <li>
                <i class="far fa-comment">
                <%= blog.comments.count %>
              </li>
              <li>
                <i class="far fa-bookmark"></i>
                <!-- アイコン変更??共有機能実装か。。。検討！ -->
              </li>
            </ul>
           <!-- 非同期で新規コメント入力機能追加 -->
            <div class="new-comment-form">
                <%= form_for [@blog, @blog_comment] do |f| %>
                <!-- <input class="form-control mr-sm-3" type="text" placeholder="Commnets" aria-label="Comments"> -->
                <%= f.text_area :comment %>
                <!-- size: "90x5" %> -->
                <%= f.submit '投稿する' %>
                <% end %>
            </div>
          </footer>
        <% end %>
      </article>
    </div>
    <!-- side-bar -->
    <div class="col-md-offset-1 col-md-4">
      <div class="sidebar-right">
        <div class="sidebar-heading">
          <table class="current-user-profile">
            <tr>
            <th>
              <%= link_to user_path(current_user) do %>
                <%= attachment_image_tag current_user, :profile_image, size:'50x50', fallback: 'no_image.jpg', class: "profile-image-circle img-circle pull-left profile-thumb" %>
              <% end %>
            </th>
            <th>
              <%= link_to "#{current_user.name}", user_path(current_user) %>
            </th>
          </tr>
        </table>
        </div>
      </div>
        <!-- following_user一覧 -->
      <div class="relationships-user-list">
        <div class="user-list-box">
          <div class="box-heading">
            <h5>フォロー中</h5>
            <h5><%= link_to "すべて見る", users_followings_path %></h5>
          </div>
          <div class="following-user-list">
            <ul>
              <% @followings.each do |following| %>
                <li>
                  <%= link_to user_path(following) do %>
                  <%= attachment_image_tag current_user.following, :profile_image, size:'20x20', fallback: 'no_image.jpg', class: "img-circle pull-left profile-thumb" %>
                  <% end %>
                </li>
                <li>
                  <%= current_user.following.name %>
                </li>
              <% end %>
            </ul>
          </div>
        </div>
        <!--  followed_user一覧 -->
        <div class="user-list-box">
          <div class ="box-heading">
            <h5>フォロワー</h5>
            <h5><%= link_to "すべて見る", users_followeds_path %></h5>
          </div>
          <div class="followed-user-list">
            <ul>
              <% @followeds.each do |followed| %>
                <li>
                  <%= link_to user_path(followed) do %>
                  <%= attachment_image_tag current_user.followed, :profile_image, size:'20x20', format: 'jpeg', fallback: 'no_image.jpg', class: "img-circle pull-left profile-thumb" %>
                  <% end %>
                </li>
                <li>
                  <%= current_user.followed.name %>
                </li>
              <% end %>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

